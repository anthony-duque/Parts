<html ng-app='carViewModule'>
<head>
    <title>Car Parts Status</title>
    <script src="./scripts/angularjs.js"></script>
    <script src="./scripts/Car_View.js"></script>
    <script src='./scripts/UtilityFunctions.js'></script>
    <link rel='stylesheet' href="./styles/Parts.css" />
</head>

<body ng-controller="carViewController">

    <table width='100%' align=center border=0 class='heading'>
        <tr>
            <th rowspan="2">
                <img ng-src='./images/{{ car.location }}.png' style="max-width: 75px; max-height: 75px">
            </th>
            <th width='10%' align='left'>
                {{ car.ro_num }}
            </th>
            <th align='left'>
                {{ car.vehicle }}
            </th>
            <td align='left' width='5%'>
                Color:
            </td>
            <th align='left' width='15%'>
                {{ car.vehicle_color }}
            </th>
            <td align='right' width='5%'>
                Estimator:
            </td>
            <th align='left' width='15%'>
                &nbsp;{{ car.estimator }}
            </th>
            <td align='right' width='10%'>
                Vehicle In:
            </td>
            <th width='10%'>
                {{ car.vehicle_in }}
            </th>
        </tr>
        <tr>
            <th align='left'>
                {{ car.owner }}
            </th>
            <th align='left'>
                {{ car.insurance }}
            </th>
            <td align='left'>
                License:
            </td>
            <th align='left'>
                 {{ car.license_plate }}
            </th>
            <td align='right'>
                Technician:
            </td>
            <th align='left'>
                &nbsp;{{ car.technician }}
            </th>
            <td align='right'>
                Scheduled Out:
            </td>
            <th>
                {{ car.scheduled_out }}
            </th>
        </tr>
    </table>

    <br/>

    <table width='40%' border="1"align='center'>
    <thead>
        <tr>
            <th colspan="2" class='lightBlue' ng-click='showSublet = !showSublet'>
                S U B L E T S
            </th>
        </tr>
        <tr ng-show='showSublet'>
            <th ng-hide='car.subletList.length == 0'>
                Description
            </th>
            <th ng-hide='car.subletList.length == 0'>
                Company
            </th>
        </tr>
    </thead>
    <tbody>
        <tr ng-repeat='sublet in car.subletList' ng-class='ToggleColor($index, "white", "orange");' ng-show='showSublet'>
            <td align='center'>
                {{ sublet.part_description }}
            </td>
            <td align='center'>
                {{ sublet.vendor_name }}
            </td>
        </tr>
        <tr ng-show='car.subletList.length == 0'>
            <th colspan=2>No sublets required for this repair.</th>
        </tr>
    </tbody>
    </table>

    <br/>

    <table width=100% align='center' id='carParts'>
        <tr>
            <td align='left'>
                <input type='button' value="Go Back" ng-click='GoBackToMainPage();'>
            </td>
            <td align='center' colspan='6'>
                Search: <input type='text' ng-model='searchText' />
                &nbsp;<input type='button' value='Clear' ng-click='searchText = ""'>
            </td>
        </tr>
        <tr>
            <th style='border-bottom-style: groove' ng-click="SortParts('line_num');">
                Line
            </th>
            <th style='border-bottom-style: groove' ng-click="SortParts('part_number');">
                Part Number
            </th>
            <th style='border-bottom-style: groove' ng-click="SortParts('part_description');">
                Part Description
            </th>
            <th style='border-bottom-style: groove' ng-click="SortParts('part_status');">
                Part Status
            </th>
            <th style='border-bottom-style: groove' ng-click="SortParts('vendor_name');">
                Vendor Name
            </th>
            <th style='border-bottom-style: groove' ng-click="SortParts('ro_quantity');">
                RO<br/>Qty
            </th>
            <th style='border-bottom-style: groove' ng-click="SortParts('ordered_quantity');">
                Ordered<br/>Qty
            </th>
            <th style='border-bottom-style: groove' ng-click="SortParts('ordered_quantity');">
                Order<br/>Date
            </th>
            <th style='border-bottom-style: groove' ng-click="SortParts('expected_delivery');">
                Expected<br/>Delivery
            </th>
            <th style='border-bottom-style: groove' ng-click="SortParts('received_quantity');">
                Receive<br/>Date
            </th>
            <th style='border-bottom-style: groove' ng-click="SortParts('received_quantity');">
                Received<br/>Qty
            </th>
            <th style='border-bottom-style: groove' ng-click="SortParts('returned_quantity');">
                Returned<br/>Qty
            </th>
        </tr>
        <tr ng-show='car.partsList.length == 0'>
            <th colspan='12' class='lightgreen'>
                <br/>
                No parts required for this repair.
                <br/>
                <br/>
            </th>
        </tr>
        <tr ng-repeat='eachPart in car.partsList | orderBy: sortField | filter: searchText'
            ng-class="PartStatus(eachPart)">
            <td align='center'>
                {{ eachPart.line_num }}
            </td>
            <td align='center'>
                <a href='http://www.google.com/search?tbm=isch&q={{ eachPart.part_number }}' target='CarPart' >
                    {{ eachPart.part_number }}
                </a>
            </td>
            <td align='left'>
                {{ eachPart.part_description }}
            </td>
            <td align='center'>
                {{ eachPart.part_status }}
            </td>
            <td align='center'>
                {{ eachPart.vendor_name }}
            </td>
            <td align='center'>
                {{ eachPart.ro_quantity }}
            </td>
            <td align='center'>
                {{ eachPart.ordered_quantity }}
            </td>
            <td align='center'>
                {{ eachPart.order_date }}
            </td>
            <td align='center'>
                {{ eachPart.expected_delivery }}
            </td>
            <td align='center'>
                {{ eachPart.invoice_date }}
            </td>
            <td align='center'>
                {{ eachPart.received_quantity }}
            </td>
            <td align='center'>
                {{ eachPart.returned_quantity }}
            </td>
        </tr>
    </table>

</body>
</html>
