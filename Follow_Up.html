<html ng-app="SampleApp">
<head>
  <title>Sample Page</title>
  <script src="./scripts/angularjs.js"></script>
  <script src="./scripts/sample.js"></script>
</head>
<body ng-controller='SampleController'>

    <table width='100%'>
    <tr>
        <td>
            Location:
            <select ng-model='locationID'>
                <option value='' selected>
                    All Locations
                </option>
                <option value='1'>
                    Carstar City Auto Body
                </option>
                <option value='2'>
                    Carstar Simi Valley
                </option>
            </select>
        </td>
        <td>
            Vendor:
            <select ng-model='vendorName'>
                <option value='' selected>
                    All Vendors
                </option>
                <option ng-repeat='vendor in vendorList' value='{{ vendor.name }}'>
                    {{ vendor.name }} ({{ vendor.locID }})
                </option>
            </select>
        </td>
        <td>
            Estimator:
            <select ng-model='estimatorName'>
                <option value='' selected>
                    All Estimators
                </option>
                <option ng-repeat='estimator in estimatorList | filter : { locID : locationID }' value='{{ estimator.name }}'>
                    {{ estimator.name }} - {{ estimator.locID }}
                </option>
            </select>
        </td>
        <td>
            Status:
            <select ng-model='partStatus'>
                <option value='' default>
                    Any Status
                </option>
                <option value='ORDERED'>
                    ORDERED
                </option>
                <option value='NOT ORDERED'>
                    NOT ORDERED
                </option>
            </select>
        </td>
    </tr>
    </table>

    <table border='1' align='center' width='100%'>
    <tr>
        <th>Vendor</th>
        <th>Cars</th>
    </tr>
    <tr ng-repeat='eachVendor in vendors | filter: { name : vendorName, locID : locationID }' ng-show='filteredCars.length > 0'   ng-hide='((partStatus == "NOT ORDERED") && (eachVendor.name.length > 0))'>
        <td width='15%'>
            {{ eachVendor.name }} ({{ eachVendor.locID }})
        </td>
        <td>
            <table border='1' width='100%'>
            <tr ng-repeat='eachCar in filteredCars = (eachVendor.cars | filter : { estimator : estimatorName, locID : locationID })' ng-show='filteredParts.length > 0'>
                <th width='20%'>
                    {{ eachCar.roNum }}
                    <br/>
                    {{ eachCar.vehicle }}
                    <br/>
                    {{ eachCar.estimator }}
                </th>
                <th>
                    <table border='1' width='100%'>
                    <tr ng-repeat='eachPart in filteredParts = (eachCar.parts | filter : { status : partStatus } : true)'>
                        <td width='25%'>
                            {{ eachPart.number }}
                        </td>
                        <td width='25%'>
                            {{ eachPart.type }}
                        </td>
                        <td width='25%'>
                            {{ eachPart.description }}
                        </td>
                        <td width='25%'>
                            {{ eachPart.status }}
                        </td>
                    </tr>
                    </table>
                </td>
            </tr>
            </table>
        </td>
    </tr>
    </table>
</body>
</html>
